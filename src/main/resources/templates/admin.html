<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
  <title>Spring Security Example</title>
</head>
<body>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!-- Nav bar -->
<nav class="navbar navbar-dark bg-dark">
  <span class="navbar-brand mb-0 h1">admin@mail.ru with roles: ADMIN USER</span>
  </span>
  <form th:action="@{/logout}" th:method="POST">
    <button type="submit" class="btn btn-dark">Logout</button>
  </form>
</nav>



<div class="container-fluid bg-light">
  <div class="row">
    <div class="col-md-2 bg-white">
      <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
        <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true">Admin</a>
        <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false">User</a>
      </div>
    </div>
    <div class="col-md-10">
      <!-- Содержимое вкладок Admin и User -->
      <div class="tab-content" id="v-pills-tabContent">
        <!-- Содержимое вкладки Admin -->
        <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
          <!-- Nav Tab Admin -> Users table & New User -->
          <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="home-tab" data-toggle="tab" href="#home" role="tab" aria-controls="home" aria-selected="true">Users table</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="profile-tab" data-toggle="tab" href="#profile" role="tab" aria-controls="profile" aria-selected="false">New User</a>
            </li>
          </ul>
          <div class="tab-content" id="myTabContent">
            <!-- Содержимое вкладки Users table -->
            <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
              <!-- Card + table -->
              <div class="card">
                <h5 class="card-header">All users</h5>
                <!-- Table of Users -->
                <table class="table table-striped">
                  <thead>
                  <tr>
                    <th scope="col">ID</th>
                    <th scope="col">First Name</th>
                    <th scope="col">Last Name</th>
                    <th scope="col">Age</th>
                    <th scope="col">Email</th>
                    <th scope="col">Role</th>
                    <th scope="col">Edit</th>
                    <th scope="col">Delete</th>
                  </tr>
                  </thead>
                  <tbody>

                  <tr th:each="user : ${users}">
                    <td th:text="${user.getId}"></td>
                    <td th:utext="${user.getUsername}"></td>
                    <td th:utext="${user.getLastname}"></td>
                    <td th:utext="${user.getAge}"></td>
                    <td th:utext="${user.getEmail}"></td>
                    <td>
                      <span th:each="role : ${user.getRoles}">
                        <span th:text="${role.name.substring(5)}"></span>
                      </span>
                    </td>
                  </tr>


                  </tbody>
                </table>

              </div>
            </div>
            <!-- Содержимое вкладки New User -->
            <div class="tab-pane fade" id="profile" role="tabpanel" aria-labelledby="profile-tab">
              <!-- New User (card + form) -->
              <div class="card">
                <h5 class="card-header">Add new user</h5>
                <div class="card-body text-center">
                  <form th:method="POST" th:action="@{/admin/}" th:object="${user}">
                    <br>
                    <label class="font-weight-bold" for="newUsername">First Name</label>
                    <input class="form-control" type="text" th:field="*{username}" id="newUsername" style="height: 30px; width: 300px; margin: 0 auto" placeholder="First Name">
                    <br>
                    <label class="font-weight-bold" for="newLastname">Last Name</label>
                    <input class="form-control" type="text" th:field="*{lastname}" id="newLastname" style="height: 30px; width: 300px; margin: 0 auto" placeholder="Last Name">
                    <br>
                    <label class="font-weight-bold" for="newAge">Age</label>
                    <input class="form-control" type="text" name="age"
                           id="newAge" style="height: 30px; width: 300px; margin: 0 auto" placeholder="Age">
                    <br>
                    <label class="font-weight-bold" for="newEmail">Email</label>
                    <input class="form-control" type="text" name="email"
                           id="newEmail" style="height: 30px; width: 300px; margin: 0 auto" placeholder="Email">
                    <br>
                    <label class="font-weight-bold" for="newPassword">Password</label>
                    <input class="form-control" type="text" name="password"
                           id="newPassword" style="height: 30px; width: 300px; margin: 0 auto" placeholder="Password">

                    <label class="font-weight-bold">Role</label>
                    <label class="container-fluid">
                      <select th:field="*{roles}" multiple="multiple"
                              style="height: 40px; width: 300px; margin: 0 auto; position: relative;">
                        <option th:each="role : ${allRoles}"
                                th:value="${role.id}"
                                th:text="${role.name}">
                        </option>
                      </select>
                      <span class="arrow"></span>
                    </label>

                    <br/>
                    <div>
                      <button type="submit" class="btn btn-success">Add new user</button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- Содержимое вкладки User -->
        <div class="tab-pane fade" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
          ...
        </div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
